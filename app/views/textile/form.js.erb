<% form = render partial: 'textile/form' %>

$('.textile-form').removeClass('loading-indicator').html('');
$('.textile-form').removeClass('loading-indicator').append('<%= escape_javascript(form) %>');

$('[data-behavior~=delete-field]').click( function(){
  $(this).closest('[data-behavior~=textile-form-field]').remove();
});

$('[data-expand~=auto]').each( function() {
  $(this).css({'padding': '0.375rem 0.75rem', 'height': this.scrollHeight});
});

$('[data-expand~=auto]').on('keyup', function(e) {
  $(this).css({
    'padding': '0.375rem 0.75rem',
    'height': '1px'
  }).css({
    'padding': '0.375rem 0.75rem',
    'height': this.scrollHeight + 2
  });
});
